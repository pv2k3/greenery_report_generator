<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ola Maps Static Tile Viewer</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    #tile {
      margin-top: 20px;
      border: 2px solid #ccc;
    }
    input {
      padding: 8px;
      margin: 5px;
      font-size: 16px;
      width: 120px;
    }
    button {
      padding: 10px 16px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h2>üó∫Ô∏è Ola Maps Static Tile Viewer (with API key)</h2>

  <input type="number" id="lat" placeholder="Latitude" step="0.00001" value="26.85">
  <input type="number" id="lng" placeholder="Longitude" step="0.00001" value="80.94">
  <input type="number" id="zoom" placeholder="Zoom" value="13" min="1" max="18">
  <input type="text" id="apiKey" placeholder="Your API Key" style="width: 300px;">
  <br>
  <button onclick="loadTile()">Get Static Tile</button>

  <div id="tileContainer"></div>

  <script>
    function latLngToTile(lat, lng, zoom) {
      const latRad = lat * Math.PI / 180;
      const n = Math.pow(2, zoom);
      const xTile = Math.floor((lng + 180) / 360 * n);
      const yTile = Math.floor((1 - Math.log(Math.tan(latRad) + 1 / Math.cos(latRad)) / Math.PI) / 2 * n);
      return { x: xTile, y: yTile };
    }

    function loadTile() {
      const lat = parseFloat(document.getElementById('lat').value);
      const lng = parseFloat(document.getElementById('lng').value);
      const zoom = parseInt(document.getElementById('zoom').value);
      const apiKey = document.getElementById('apiKey').value.trim();

      if (!apiKey) {
        alert("Please enter your Ola Maps API key.");
        return;
      }

      const { x, y } = latLngToTile(lat, lng, zoom);
      const tileURL = `https://maps.olakrutrim.com/api/tiles/ola/standard/${zoom}/${x}/${y}.png?apiKey=${apiKey}`;

      document.getElementById('tileContainer').innerHTML = `
        <h3>Tile: z=${zoom}, x=${x}, y=${y}</h3>
        <a href="${tileURL}" download="tile_${zoom}_${x}_${y}.png">
          <img id="tile" src="${tileURL}" alt="Ola Maps Tile">
        </a>
      `;
    }

    window.onload = loadTile;
  </script>

</body>
</html>
